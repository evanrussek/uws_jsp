
<!DOCTYPE html>
<html>
  <head>
    <title>My experiment</title>
    <script src="jspsych-6.0.5/jspsych.js"></script>
    <script src="jspsych-6.0.5/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6.0.5/plugins/jspsych-html-button-response.js"></script>
    <script src="jspsych-6.0.5/plugins/jspsych-image-keyboard-response.js"></script>
    <script src="jspsych-6.0.5/plugins/jspsych-fullscreen.js"></script>
    <script src="jspsych-6.0.5/evan_plugins/jspsych-evan-run-trial.js"></script>
    <script src="jspsych-6.0.5/evan_plugins/jspsych-evan-instructions.js"></script>
    <script src="jspsych-6.0.5/evan_plugins/jspsych-evan-info-quiz.js"></script>
    <script src="jspsych-6.0.5/evan_plugins/jspsych-evan-two-stim-choice.js"></script>
    <link href="jspsych-6.0.5/css/jspsych.css" rel="stylesheet" type="text/css"></link>
    <link rel='stylesheet' type='text/css' href='default_style.css'>

    <link rel='stylesheet' type='text/css' href='style.css'>
    <script type="text/javascript" src="jspsych-6.0.5/d3.min.js"></script>

  </head>
  <body></body>

  <script type="text/javascript" src="evan_utils.js"></script>
  <script>
    // generate a random subject ID with 15 characters
    var subject_id = jsPsych.randomization.randomID(15);
    // pick a random condition for the subject at the start of the experiment
    var condition_assignment = jsPsych.randomization.sampleWithoutReplacement(['conditionA', 'conditionB', 'conditionC'], 1)[0];
  </script>

  <script type="text/javascript" src="parameters.js"></script>
  <script type="text/javascript" src="define_trials.js"></script>


  <script>


  /* */
  /* create timeline */
  var timeline = [];


  var full_screen = {
    type: 'fullscreen',
    fullscreen_mode: true
  };


  /* define welcome message trial */
  var welcome = {
    type: "html-keyboard-response",
    stimulus: "Welcome to the experiment. Press any key to begin."
  };

var exp_block1_trials = all_trials_shuff.slice(0,100);
var exp_block2_trials = all_trials_shuff.slice(3,6);

var block1_node = {
  timeline: exp_block1_trials,
  data: {block: 'block1'}
}

var block2_node = {
  timeline: exp_block2_trials,
  data: {block: 'block2'}
}

// returns button pressed
var button_trial = {
    type: 'html-button-response',
    stimulus: '<p>Which Blocko Do you want to do?</p>',
    choices: ['First Block', 'Second Block', 'Neither'],
    prompt: "<p>Is this activity healthy or unhealthy?</p>"
};

var inst_trial = {
    type: 'evan-instructions',
    pages: [
        'Welcome to the experiment. Click next to begin.',
        'This is the second page of instructions.',
        'This is the final page.'
    ],
    show_clickable_nav: true,
    o1_image: thing_images[0], // set per subject, using subject number -- need to counterbalance this...
    o2_image: thing_images[1], //
    safe_image: thing_images[2],
    o1_name: thing_names[0],
    o2_name:  thing_names[1],
    safe_name: thing_names[2],
    // this depends on the proability...
    choice_image: fractal_images[1] // each cho
}


timeline = [full_screen, block1_node, block2_node];
//timeline = [button_trial];
//timeline = [full_screen,inst_trial];
//timeline = [full_screen, choice_trial, choice_trial, choice_trial, choice_trial];
  /* start the experiment */
  jsPsych.init({
    timeline: timeline,
    show_preload_progress_bar: false,
    on_finish: function() {
      //console.log('done')
      jsPsych.data.get().localSave('csv','test_res.csv');
    //on_finish: saveData
  }
  });

</script>
</html>
